(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();function L(){const e=document.querySelector(".header__member-btn"),t=document.querySelector(".header__logout--btn");e&&e.addEventListener("click",o=>{o.preventDefault(),localStorage.setItem("isMember","true"),window.location.href="/member-page.html"}),t&&t.addEventListener("click",o=>{o.preventDefault(),localStorage.removeItem("isMember"),window.location.href="/index.html"})}function E(){if(!(localStorage.getItem("isMember")==="true")){window.location.href="/index.html";return}const t=document.querySelector(".review__form");t&&t.addEventListener("submit",o=>{if(o.preventDefault(),!t.checkValidity()){alert("Please fill in all fields correctly.");return}t.reset(),alert("Review submitted!")})}function k(){const e=document.querySelector(".login__modal"),t=document.querySelector(".header__login-btn");if(!t||!e)return;t.addEventListener("click",n=>{n.preventDefault(),e.style.display="flex"});const o=document.querySelector(".login__close"),r=document.querySelector(".login__submit");t.addEventListener("click",()=>{e.style.display="flex"}),o.addEventListener("click",()=>{e.style.display="none"}),e.addEventListener("click",n=>{n.target===e&&(e.style.display="none")}),r.addEventListener("click",n=>{n.preventDefault(),window.location.href="member-page.html"})}function S(){const e=document.querySelector(".register__modal"),t=document.querySelector(".open-register"),o=document.querySelector(".register__close"),r=document.querySelector(".register__submit");t.addEventListener("click",()=>{e.style.display="flex"}),o.addEventListener("click",()=>{e.style.display="none"}),e.addEventListener("click",n=>{n.target===e&&(e.style.display="none")}),r.addEventListener("click",n=>{n.preventDefault(),e.style.display="none"})}function M(){const e=document.querySelector(".header__menu-button"),t=document.querySelector(".header__nav"),o=document.querySelector(".header__nav-close");!e||!t||(e.addEventListener("click",()=>{t.classList.add("header__nav--active"),document.body.style.overflow="hidden"}),o&&o.addEventListener("click",()=>{t.classList.remove("header__nav--active"),document.body.style.overflow=""}))}function T(){const e=document.querySelector(".notice"),t=document.querySelector(".notice__close");!e||!t||t.addEventListener("click",()=>{e.style.display="none"})}const g="theme";function q(){const e=document.querySelector(".header__theme-btn--light"),t=document.querySelector(".header__theme-btn--dark"),o=localStorage.getItem(g);o==="light"&&document.body.classList.add("light"),o==="dark"&&document.body.classList.remove("light"),!(!e&&!t)&&(e&&e.dataset.bound==="1"||t&&t.dataset.bound==="1"||(e&&(e.addEventListener("click",()=>{document.body.classList.add("light"),localStorage.setItem(g,"light")}),e.dataset.bound="1"),t&&(t.addEventListener("click",()=>{document.body.classList.remove("light"),localStorage.setItem(g,"dark")}),t.dataset.bound="1")))}async function B(){const e=await fetch("./mockup_Data/movies.json");if(!e.ok)throw new Error(`Failed to fetch movies.json (${e.status})`);return await e.json()}function w(e,t="movie"){const o=document.createElement("article");o.classList.add("movies-carousel__card"),o.dataset.id=e.id;const r=document.createElement("img");r.classList.add("movies-carousel__poster"),r.src=e.Poster_Link,r.alt=`${e.Series_Title} poster`;const n=document.createElement("h3");n.classList.add("movies-carousel__title"),n.textContent=e.Series_Title;const c=document.createElement("div");c.classList.add("movies-carousel__actions");const s=document.createElement("button");s.classList.add("movies-carousel__button","trailer-btn"),s.type="button",s.textContent="Trailer",s.dataset.id=e.id;const i=document.createElement("button");i.classList.add("movies-carousel__button","details-btn"),i.type="button",i.textContent="Detaljer ▼",i.dataset.id=e.id,i.dataset.prefix=t;const u=document.createElement("div");return u.id=`${t}-details-${e.id}`,u.classList.add("movie-details-info"),u.style.display="none",u.innerHTML=`<p>${e.Overview||"Ingen beskrivning tillgänglig."}</p>`,c.append(s,i),o.append(r,n,c,u),o}function y(e,t,o="movie"){if(e){if(e.innerHTML="",!t?.length){e.innerHTML='<p class="movies-carousel__empty">Inget att visa.</p>';return}t.forEach(r=>{e.appendChild(w(r,o))})}}const v=document.getElementById("trailerModal"),h=document.getElementById("trailerIframe"),I=v.querySelector(".trailer-modal__close"),D=v.querySelector(".trailer-modal__backdrop");function x(e){h.src=`https://www.youtube.com/embed/${e}?autoplay=1`,v.classList.remove("hidden")}function p(){h.src="",v.classList.add("hidden")}I.addEventListener("click",p);D.addEventListener("click",p);document.addEventListener("keydown",e=>{e.key==="Escape"&&p()});async function H(e){const t=document.getElementById("heroInner"),o=document.querySelector(".carousel_control.prev"),r=document.querySelector(".carousel_control.next");if(t&&e.length>0){const a=[...e].sort(()=>Math.random()-.5).slice(0,6);t.innerHTML=a.map((m,b)=>`
                <div class="carousel_slide ${b===0?"active":""}" style="background-image: url('${m.Poster_Link}')">
                    <div class="slide_content">
                        <h1 class="film_title">${m.Series_Title}</h1>
                    </div>
                </div>`).join("");const l=t.querySelectorAll(".carousel_slide");let d=0;const f=m=>{l[d].classList.remove("active"),d=(m+l.length)%l.length,l[d].classList.add("active")};o&&r&&(o.onclick=()=>f(d-1),r.onclick=()=>f(d+1))}const n=()=>{document.querySelectorAll(".movies-carousel").forEach(l=>{const d=l.querySelector(".movies-carousel__track"),f=l.querySelector(".prev_btn"),m=l.querySelector(".next_btn");d&&f&&m&&(m.onclick=()=>d.scrollBy({left:350,behavior:"smooth"}),f.onclick=()=>d.scrollBy({left:-350,behavior:"smooth"}))})},c=document.getElementById("dayFilter"),s=document.getElementById("currentMoviesTrack"),i={},u=a=>{i[a]||(i[a]=[...e].sort(()=>Math.random()-.5).slice(0,10)),s&&(y(s,i[a],"current"),n())};c&&c.addEventListener("click",a=>{const l=a.target.closest(".day-btn");l&&(document.querySelectorAll(".day-btn").forEach(d=>d.classList.remove("active")),l.classList.add("active"),u(l.dataset.day))}),u("Idag"),n()}document.addEventListener("click",e=>{const t=e.target.closest(".details-btn");if(!t)return;const o=t.getAttribute("data-id"),r=t.getAttribute("data-prefix"),n=document.getElementById(`${r}-details-${o}`);if(n){const c=window.getComputedStyle(n).display==="none";n.style.display=c?"block":"none",t.innerHTML=c?"Detaljer ▲":"Detaljer ▼"}});document.querySelector(".members__offers")&&E();L();k();S();M();T();q();function $(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function _(e){const t=$(e.Show_Date);if(!t)return!1;const o=new Date;return o.setHours(0,0,0,0),t>o}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("currentMoviesTrack"),t=document.getElementById("comingSoonTrack"),o=document.getElementById("eventsTrack");e&&(e.innerHTML="<p>Laddar…</p>"),t&&(t.innerHTML="<p>Laddar…</p>"),o&&(o.innerHTML="<p>Laddar…</p>");try{const r=await B();H(r);const n=r.filter(_),c=r.filter(s=>!_(s));y(e,c.slice(0,20)),y(t,n.slice(0,10)),y(o,c.slice(0,10)),document.body.addEventListener("click",s=>{const i=s.target.closest(".movies-carousel__button");if(i&&i.textContent==="Trailer"){const u=Number(i.dataset.id),a=r.find(l=>l.id===u);if(!a?.Trailer_Id){alert("Trailer saknas");return}x(a.Trailer_Id)}})}catch(r){console.error(r);const n=`<p class="empty_state">Kunde inte hämta filmer: ${r.message}</p>`;e&&(e.innerHTML=n),t&&(t.innerHTML=n)}});
